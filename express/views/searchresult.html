<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="stylee2.css">
    <link href="https://db.onlinewebfonts.com/c/ad7151f90039f421ef9eda4996cb65db?family=Avenir+LT+Pro+95+Black" rel="stylesheet">
    <title>TLeisures</title>
</head>
<body>
    <header>
        <a href="/"><h1>Tleisures</h1></a>
    </header>
    <main>
        <section>
            <form class="search-box" action="/searchresult" method="get">
                <input type="text" name="destination" id="destination" placeholder="Where are you going" value="{{destination}}">
                <input type="date" name="departureDate" id="departure-date" value="{{departureDate}}">
                <input type="hidden" name="n" value="1">
                <button type="submit" id="search-button">Search</button>
            </form>
        </section>

        <!-- 
            if users.length !==0 , results-container
            else , '새로운 프론트앤드 코드 '
         -->
        {% if users.length !==0 %}
        <div class="results-container">
            <!-- Search results will go here -->
            {% for u in users %}
            <a href="{{u.productUrl}}">
                <div class="result-box">
                    <img src="{{u.images[0].variants[12].url}}" alt="Result Image">
                    <div class="result-box-info">
                        <h3>{{u.title}}</h3>
                        {% if u.reviews.combinedAverageRating !==undefined %}
                            <div class="result-box-review">
                                <div class="result-box-review-star">Review Score</div>
                                <div class="result-box-review-score">{{u.reviews.combinedAverageRating | round(1)}}</div>
                            </div>
                            {% else %}

                        {% endif %}
                        <div class="result-box-tandp">
                                <div class="provider">viator</div>
                                <div class="result-box-price">{{u.pricing.summary.fromPrice}} {{u.pricing.currency}}</div>
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}
            
            <button onclick="topFunction()" id="myBtn" title="Go to top">
                <img src="/toparrow.svg" alt="" class="toparrow">
            </button>

            <div class="pagenation">
                {% if currentPage!==1 %}
                <a href="?n={{currentPage-1}}&destination={{destination}}&departureDate={{departureDate}}"> <img src="/leftarrow.svg" alt="" class="leftarrow"> </a>
                {% endif %}

                {% if currentPage < totalPage %}
                <a href="?n={{currentPage+1}}&destination={{destination}}&departureDate={{departureDate}}"> <img src="/rightarrow.svg" alt="" class="rightarrow"> </a>
                {% endif %}             
             </div>
        </div>
        {% else %}
            <h3>we could not found the treasures matching {{destination}}</h3> 
            <h4>How about new search?</h4>
            <div class="noresult">
                <img src="/noresultimage.jpg" alt="" class="noresultimage">
            </div>
        {% endif %}
    </main>
    <script src="/topbtn.js"></script>
</body>
</html>

<!--  1. https:// 안전한사이트 만들기  2. css 닷 ...!    6. 시간남으면 로딩페이지 만들기 7. 랭귀지페이지 만들기 9. 디자인 문의해보기 pc / 10.모바일 둘다 GPT 활용하기

<!-- 처리한거 : 3. top버튼 만들기  4. 로고 누르면 홈페이지  5. departureDate 설정하기 8. searchresult 페이지에 상단에 위치한 입력버튼도 되겠끔 하기-->

   